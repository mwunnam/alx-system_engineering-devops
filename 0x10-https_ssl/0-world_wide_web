#!/bin/bash

# Function to get DNS record for a subdomain
get_record() {
    local domain=$1
    local subdomain=$2

    result=$(dig ${subdomain}.${domain} +short)
    record_type="A"

    if [[ -n "$result" ]]; then
        echo "The subdomain ${subdomain} is a ${record_type} record and points to ${result}"
    else
        echo "The subdomain ${subdomain} could not be resolved"
    fi
}

# Check arguments
domain=$1
sub=$2

if [[ -z "$domain" ]]; then
    echo "Usage: $0 domain [subdomain]"
    exit 1
fi

# When only domain is provided
if [[ -z "$sub" ]]; then
    for name in www lb-01 web-01 web-02; do
        get_record $domain $name
    done
else
    get_record $domain $sub
fi

awk
